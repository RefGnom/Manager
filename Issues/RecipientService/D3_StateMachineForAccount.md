# Описание

Сложность задачи заключается в её неопределённости. Задача больше про эксперименты, чем про практическую пользу. Но
именно за экспериментами и получением знаний мы тут и собрались, поэтому пробуем!

Нужно накрутить паттерн StateMachine, он же конечный автомат. Суть в том, что аккаунт одномоментно может находиться
только в одном состоянии.

Наш `RecipientAccount` и будет являться этим конечным автоматом, состояния автомата будут равны состояниям enum'а
`RecipientAccountExtendedState`.

Следующие пункты описывают наш автомат:

1. При создании `RecipientAccount` конечный автомат будет находиться в состоянии `Active`
2. У автомата есть несколько входных сигналов:
    * `Activate` - активировать аккаунт пользователя
    * `DeletedDueToRequest` - удалить аккаунт пользователя по его запросу
    * `BanDueToNonPayment` - забанить аккаунт пользователя из-за неуплаты
3. Каждое конечное состояние само определяет как реагировать на входной сигнал. Оно может его проигнорировать, может
   вернуть ошибку, может перевести автомат в другое состояние
4. Автомат умеет отвечать на вопрос, в каком состоянии он сейчас

Мысли, которым не обязательно следовать, но можно прислушаться:

1. Одно состояние - один класс
2. Нужно хорошо подумать кто кого должен вызывать, кто от кого должен зависеть? Может ли получиться циклическая
   зависимость? Плохо ли это? Как это можно решить?

# Ожидаемый результат

Конечный автомат, удовлетворяющий требованиям:

1. Конечный автомат должен быть обособлен от доменной модели
    * Должна быть возможность унести всю логику конечного автомата в отдельный проект и переиспользовать его для любых
      других сущностей
    * Также, это будет облегчать последующее тестирование
2. Полное покрытие логики автомата юнит тестами
3. Простота в добавлении нового конечного состояния
4. Читаемость. Незнакомый с доменной моделью человек может легко определить граф состояний. Из какого в какое можно
   перейти

На подумать:

1. Может ли быть гонка потоков за право изменить состояние автомата? Что будет если есть гонка и два потока одновременно
   пытаются поменять состояние автомата? Что делать в таком случае?
2. Где в манагере ещё можно применить конечный автомат?
3. В чём плюсы конечного автомата над обычной сменой статусов?
4. В чём минусы?
5. Стоит ли использовать этот паттерн повсеместно?
